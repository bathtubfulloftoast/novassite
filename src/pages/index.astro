---
import "xp.css/dist/XP.css";
import '/src/styles/desktop.css';

import desktop from '/src/assets/desktop.json';
const icons = desktop;
---
<head>
<title>NovasDesktop</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="/favicon.ico">
<meta name="generator" content={Astro.generator} />
<meta content="Novas Site" property="og:title" />
<meta content="Novas Desktop, free for all to see!" property="og:description" />
<meta content="/media/embeds/main.png" property="og:image" />
<meta content="#6b0059" data-react-helmet="true" name="theme-color" />
<meta charset="UTF-8" />
</head>


<div class="center-screen" id="window" >
<div style="display:inline-block;z-index:5;padding:0px;margin:0px">
  <div class="title-bar">
    <div class="title-bar-text"><img src="/favicon.ico" height="16px" style="vertical-align: text-top;"> <span id="splash">Nova's Profile</span></div>
    <div class="title-bar-controls">
      <button style="cursor:pointer" aria-label="Minimize" onclick='document.getElementById("window").remove()'></button>
      <button style="cursor:pointer" aria-label="Maximize" onclick="location.href='/profile';"></button>
      <button style="cursor:pointer" aria-label="Close" onclick="location.href='/death';"></button>
    </div>
  </div>
  <div style="padding:0px;margin:0px">
<iframe style="padding:0px;margin:0px;border-left:1px solid #0831d9;border-top:none;border-right:1px solid #001ea0;border-bottom:2px solid #001ea0;" src="/profile" width="800px" height="600px;" frameBorder=""></iframe>
</div>
</div>
</div>



{icons.map((item) => (
<div class="icon" style={`left: ${item.left}px; top: ${item.top}px;`} id={item.id}>
<img src={`/media/icons/${item.icon}`} /><br>
{item.filename}
</div>
))}


<div class="taskbar">
<div style="float:left"><a id="start" style="cursor:pointer;"><img src="/media/start.gif"></a></div> <!-- no href because it adds select box -->

<div class="time" id="time">11:24 PM</div>
</div>



<script src="/src/scripts/splash.js"></script>

<script>
let now = new Date();
let hours = now.getHours();
let minutes = now.getMinutes();
let ampm = hours >= 12 ? 'PM' : 'AM';

hours = hours % 12;
hours = hours ? hours : 12;

minutes = minutes < 10 ? '0' + minutes : minutes;

document.getElementById("time").innerHTML = `${hours}:${minutes} ${ampm}`;
</script>

<script>
document.addEventListener("DOMContentLoaded", async function() {
const width = window.screen.width;
const height = window.screen.height;


const warningScreen = document.createElement('div');
warningScreen.className = "warningscreen";
warningScreen.id = "warningscreen";
warningScreen.innerHTML = "this site is meant for desktops that are 1080p<br>it seems you are not that.<br>if youre on mobile expect EVERYTHING to be broken<br>if youre on desktop with a screen that isnt 1080p expect less issues.<br><button id='warning-remove'>GO AWAY</button> <button id='warning-profile'>profile screen</button>";


async function screensize() {
if (width<1500) {
document.body.appendChild(warningScreen);
}
}

screensize()


document.getElementById("warning-remove").addEventListener("click", function(event) {
event.preventDefault();
// document.cookie = "warningscreen=ignore";
document.getElementById("warningscreen").remove();

});

document.getElementById("warning-profile").addEventListener("click", function(event) {
event.preventDefault();
// document.cookie = "warningscreen=profile";
window.location.replace("/profile");
});

});
</script>

<script>

const audioUrl = "/media/sfx/fart.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.5;
    audioElement.id = "shartmenu";


    document.body.appendChild(audioElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
audioElement.remove();
});

};

document.getElementById("start").addEventListener("click", function(event) {
event.preventDefault();
if(!document.getElementById("shartmenu")) {
createaudio(); //ive removed the ability to spam im sorgy.
}
});

</script>

<script>
const audioUrl = "/media/sfx/speen.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.2;
    audioElement.id = "speenaudio";


    document.body.appendChild(audioElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
window.open("https://youtu.be/FSHq5I8I0Wk?t=3", '_blank'); // SPINN1!!!1\
// also fuck you no spamming
audioElement.remove();
});

};

document.getElementById("speen").addEventListener("click", function(event) {
event.preventDefault();
if(!document.getElementById("speenaudio")) {
createaudio();
}
});

</script>

<script>
document.getElementById("douchebag").addEventListener("click", function(event) {
event.preventDefault();
window.open("https://youtu.be/Hw1ncADC9KM", '_blank');
})
</script>

<script>
const audioUrl = "/media/sfx/fun.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.2;
    audioElement.id = "pinkieaudio";


    document.body.appendChild(audioElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
window.open("https://youtu.be/b1Vjorjlon4", '_blank'); // i will be reusing this code again out of sheer laziness fuck you
audioElement.remove();

});

};

document.getElementById("pinkie").addEventListener("click", function(event) {
event.preventDefault();
if(!document.getElementById("pinkieaudio")) {
createaudio();
}
});

</script>

<script>
const audioUrl = "/media/sfx/vineboom.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.2;
    audioElement.id = "azureaudio";


    const imageElement = document.createElement('img');
    imageElement.src = "/media/icons/azure.gif";
    imageElement.style.position = "absolute";
    imageElement.style.left = 0;
    imageElement.style.top = 0;
    imageElement.style.zIndex = 150;
    imageElement.style.width = "100vw";
    imageElement.style.height = "100vh";


    document.body.appendChild(audioElement);
    document.body.appendChild(imageElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
audioElement.remove();
imageElement.remove();
window.open("https://azurecomettttt.carrd.co/", '_blank');
});
};

document.getElementById("azure").addEventListener("click", function(event) {
event.preventDefault();

createaudio();

});

</script>

<script>
const audioUrl = "/media/sfx/splat.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.5;


    document.body.appendChild(audioElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
audioElement.remove();
});

};

document.getElementById("lancer").addEventListener("click", function(event) {
createaudio();

});

</script>

<script>
const amongusvideos = [
"https://youtu.be/Ns3YxbIhTRM",
"https://youtu.be/yIHa5cjuTBk",
"https://youtu.be/PShRULA8sOY",
"https://youtu.be/6yvfU8xK_VQ",
"https://youtu.be/GYtBoxGB6Wo",
"https://youtu.be/KByREO4gB0M",
"https://youtu.be/oZ-51rj2_WI",
"https://youtu.be/4kzxy8eIjLI",
"https://youtu.be/SB0jgNzKMSo"
];
const max = amongusvideos.length;



document.getElementById("amongus").addEventListener("click", function(event) {
event.preventDefault();
const id = Math.floor(Math.random() * max);
let url = amongusvideos[id];

window.open(url, '_blank');// sus sus...
})
</script>

<script>
const audioUrl = "/media/sfx/mimi.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.2;
    audioElement.id = "pinkieaudio";


    document.body.appendChild(audioElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
audioElement.remove();
});

};

document.getElementById("eepster").addEventListener("click", function(event) {
event.preventDefault();
if(!document.getElementById("pinkieaudio")) {
createaudio();
}
});

</script>


<script>
const audioUrl = "/media/sfx/tf2notif.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.5;
    audioElement.id = "liberalaudio";


    const imageElement = document.createElement('img');
    imageElement.src = "/media/icons/full/liberals.png";
    imageElement.id = "liberalsimg";
    imageElement.style.zIndex = 151;
    imageElement.style.width = "100vw";
    imageElement.style.position = "fixed";
    imageElement.style.top = "30vh";


    const container = document.createElement('div');
    container.id = "liberalcontainer";
    container.style.position = "absolute";
    container.style.left = 0;
    container.style.top = 0;
    container.style.zIndex = 150;
    container.style.width = "100vw";
    container.style.height = "100vw";
    container.style.background = "black";



    document.body.appendChild(audioElement);
    document.body.appendChild(container);

    container.appendChild(imageElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
audioElement.remove();
container.remove();

});
};

document.getElementById("liberals").addEventListener("click", function(event) {
event.preventDefault();

createaudio();

});

//this code has become illegible.
// idc tho thats an issue for me in the future lmao

//fuck you.
</script>

<script>
const audioUrl = "/media/sfx/lobotomy.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.2;


    const container = document.createElement('div');
    container.style.position = "absolute";
    container.style.left = 0;
    container.style.top = 0;
    container.style.zIndex = 150;
    container.style.width = "100vw";
    container.style.height = "100vw";
    container.style.background = "white";



    document.body.appendChild(audioElement);
    document.body.appendChild(container);



    audioElement.play();

audioElement.addEventListener('ended', (event) => {
audioElement.remove();
container.remove();

});
};

document.getElementById("gettingyou").addEventListener("click", function(event) {
event.preventDefault();
createaudio();
});

</script>

<script>
document.getElementById("enid").addEventListener("click", function(event) {
event.preventDefault();
window.open("https://www.youtube.com/results?search_query=enid+ok+ko+fancam", '_blank');
})
</script>

<script>
document.getElementById("teengirl").addEventListener("click", function(event) {
event.preventDefault();
window.open("https://www.reddit.com/R/girlyteengirlhate/", '_blank');
})
</script>

<script>
document.getElementById("spaunch").addEventListener("click", function(event) {
event.preventDefault();
window.open("https://github.com/trakBan/spongebob-cli", '_blank');
})
</script>

<script>
const audioUrl = "/media/sfx/love.ogg";


let audioBlobUrl = null;


async function fetchBlob(url) {
    const response = await fetch(url);
    const blob = await response.blob();
    return URL.createObjectURL(blob);
}

async function preloadBlobs() {
    audioBlobUrl = await fetchBlob(audioUrl);
}

preloadBlobs();

async function createaudio() {

    const audioBlobUrl = await fetchBlob(audioUrl);

    const audioElement = document.createElement('audio');
    audioElement.src = audioBlobUrl;
    audioElement.volume = 0.5;
    audioElement.id = "azureaudio";


    const imageElement = document.createElement('img');
    imageElement.src = "/media/icons/full/winning smile.png";
    imageElement.style.position = "absolute";
    imageElement.style.left = 0;
    imageElement.style.top = 0;
    imageElement.style.zIndex = 150;
    imageElement.style.width = "100vw";
    imageElement.style.height = "100vh";


    document.body.appendChild(audioElement);
    document.body.appendChild(imageElement);


    audioElement.play();

audioElement.addEventListener('ended', (event) => {
audioElement.remove();
imageElement.remove();
});
};

document.getElementById("charmer").addEventListener("click", function(event) {
event.preventDefault();

createaudio();

});

</script>

<script>
document.getElementById("yayl").addEventListener("click", function(event) {
event.preventDefault();
window.open("https://gamejolt.com/games/YaYL/818150", '_blank');// i have to advertize i asked people for icons and they delivered im sorry
})
</script>

<script>
document.getElementById("remember").addEventListener("click", function(event) {
event.preventDefault();
window.open("https://youtu.be/P_nvW4TeF3M", '_blank');// I FUCKING FORGOT I HAD ONE JOB TO NOT FORGET AND I FORGOT FUCK
})
</script>
